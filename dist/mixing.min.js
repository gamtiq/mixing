!function(e,o){void 0===e&&void 0!==window&&(e=window),"object"==typeof module&&module.exports?module.exports=o(require,exports,module):"function"==typeof define&&define.amd?define(["require","exports","module"],o):e.mixing=o(0,0,{exports:e})}(this,function(e,o,r){var A;function b(e,o){var r,t,n,i;if(Array.isArray(e)){if(0<e.length)for(r={},t=e.length;r[e[--t]]=o||null,t;);}else"string"==(i=typeof e)||"symbol"==i?(r={})[e]=o||null:"object"==i&&(e instanceof RegExp?n=e:r=e);return{map:r,regexp:n}}function v(e,o,r,t){var n,i,c=o[r],p=r.toString();function u(){return{field:r,value:c,targetValue:e[r],target:e,source:o}}t.ownProperty&&!o.hasOwnProperty(r)||t.copyMap&&!(r in t.copyMap)||t.copyRegExp&&!t.copyRegExp.test(p)||t.exceptions&&t.exceptions[r]||t.exceptRegExp&&t.exceptRegExp.test(p)||t.filter&&!t.filter.call(null,u())||t.filterRegExp&&!t.filterRegExp.test("symbol"==typeof c?c.toString():c)||((n=t.otherNameMap)&&r in n&&(r=n[r]),p=typeof c,!(t.recursive&&c&&"object"==p&&(i=e[r])&&"object"==typeof i)||Array.isArray(c)&&!t.mixFromArray||Array.isArray(i)&&!t.mixToArray?(n="function"==p)&&!t.copyFunc||r in e&&(!(i=t.overwrite)||"function"==typeof i&&!i(u())||i instanceof RegExp&&!i.test(r))||(t.changeFunc?c=t.changeFunc.call(null,u()):(p=t.change)&&r in p&&(c=p[r]),n&&t.funcToProto?e.constructor.prototype[r]=c:e[r]=c):w(i,c,t.mixFromArray?w({oneSource:!0},t):t))}function w(e,o,r){var t,n=typeof e,i=typeof o;if(e&&("object"==n||"function"==n)&&o&&("object"==i||"function"==i)){"object"!=typeof r||null===r?r=A||{}:A&&(t=A,A=null,r=w({},[r,t]),A=t),Array.isArray(o)&&!r.oneSource||(o=[o]);var c,p,u,a,y,f=Object.getOwnPropertySymbols,l=Object.getPrototypeOf,s={copyFunc:!("copyFunc"in r)||r.copyFunc,funcToProto:Boolean(r.funcToProto),processSymbol:(!("processSymbol"in r)||r.processSymbol)&&"function"==typeof f,mixFromArray:Boolean("mixFromArray"in r?r.mixFromArray:r.mixArray),mixToArray:Boolean("mixToArray"in r?r.mixToArray:r.mixArray),overwrite:r.overwrite,ownProperty:Boolean(r.ownProperty),recursive:Boolean(r.recursive),otherNameMap:"otherName"in r?r.otherName:null,changeFunc:r.changeFunc,copyMap:r.copyMap,copyRegExp:r.copyRegExp,exceptions:r.exceptions,exceptRegExp:r.exceptRegExp,filterRegExp:r.filterRegExp},x=s.ownProperty,g=s.processSymbol,i=r.change,m=r.copy,h=r.except,r=r.filter;for(m&&(m=b(m),s.copyMap=m.map,s.copyRegExp=m.regexp),h&&(h=b(h,!0),s.exceptions=h.map,s.exceptRegExp=h.regexp),r&&(s["object"==typeof r?"filterRegExp":"filter"]=r),i&&(s["function"==typeof i?"changeFunc":"change"]=i),c=0,u=o.length;c<u;c++)if(t=o[c]){for(y in t)v(e,t,y,s);if(g){h={};do{for(p=0,a=(m=f(t)).length;p<a;p++)(y=m[p])in h||(v(e,t,y,s),h[y]=!0)}while(t=x?null:l(t))}}}return e}return Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),w.assign=function(e){return w(e,Array.prototype.slice.call(arguments,1),{overwrite:!0,ownProperty:!0})},w.change=function(e,o){return w(e,e,{change:o,overwrite:!0,oneSource:!0})},w.copy=function(e,o){return w({},e,o)},w.mixToItems=function(e,o,r){for(var t=0,n=e.length;t<n;t++)e[t]=w(e[t],o,r);return e},w.clone=function(e){return w({},this,e)},w.filter=function(e){return w({},this,"function"==typeof e?{filter:e}:e)},w.map=function(e){return w({},this,"function"==typeof e?{change:e}:e)},w.mix=function(e,o){return w(this,e,o)},w.update=function(e){return w.change(this,e)},w.getSettings=function(){return A},w.setSettings=function(e){A="object"==typeof e?e:null},r.exports=w});