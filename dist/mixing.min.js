!function(e,o){if(void 0===e&&void 0!==window&&(e=window),"object"==typeof module&&module.exports)module.exports=o(require,exports,module);else if("function"==typeof define&&define.amd)define(["require","exports","module"],o);else{var r={exports:e};e.mixing=o(0,0,r)}}(this,function(e,o,r){var v;function d(e,o){var r,t,n,i;if(Array.isArray(e)){if(0<e.length)for(r={},t=e.length;r[e[--t]]=o||null,t;);}else"string"==(i=typeof e)||"symbol"==i?(r={})[e]=o||null:"object"==i&&(e instanceof RegExp?n=e:r=e);return{map:r,regexp:n}}function w(e,o,r,t){var n,i,c,p,a,u=o[r],y=r.toString();t.ownProperty&&!o.hasOwnProperty(r)||t.copyMap&&!(r in t.copyMap)||t.copyRegExp&&!t.copyRegExp.test(y)||t.exceptions&&t.exceptions[r]||t.exceptRegExp&&t.exceptRegExp.test(y)||t.filter&&!t.filter.call(null,{field:r,value:u,target:e,source:o})||t.filterRegExp&&!t.filterRegExp.test("symbol"==typeof u?u.toString():u)||((c=t.otherNameMap)&&r in c&&(r=c[r]),p=typeof u,!(t.recursive&&u&&"object"==p&&(a=e[r])&&"object"==typeof a)||Array.isArray(u)&&!t.mixFromArray||Array.isArray(a)&&!t.mixToArray?(n="function"==p,!t.overwrite&&r in e||n&&!t.copyFunc||(t.changeFunc?u=t.changeFunc.call(null,{field:r,value:u,target:e,source:o}):(i=t.change)&&r in i&&(u=i[r]),n&&t.funcToProto?e.constructor.prototype[r]=u:e[r]=u)):E(a,u,t.mixFromArray?E({oneSource:!0},t):t))}function E(e,o,r){var t=typeof e,n=typeof o;if(e&&("object"==t||"function"==t)&&o&&("object"==n||"function"==n)){var i;"object"!=typeof r||null===r?r=v||{}:v&&(i=v,v=null,r=E({},[r,i]),v=i),Array.isArray(o)&&!r.oneSource||(o=[o]);var c,p,a,u,y,f=Object.getOwnPropertySymbols,l=Object.getPrototypeOf,s={copyFunc:!("copyFunc"in r)||r.copyFunc,funcToProto:Boolean(r.funcToProto),processSymbol:(!("processSymbol"in r)||r.processSymbol)&&"function"==typeof f,mixFromArray:Boolean("mixFromArray"in r?r.mixFromArray:r.mixArray),mixToArray:Boolean("mixToArray"in r?r.mixToArray:r.mixArray),overwrite:Boolean(r.overwrite),ownProperty:Boolean(r.ownProperty),recursive:Boolean(r.recursive),otherNameMap:"otherName"in r?r.otherName:null,changeFunc:r.changeFunc,copyMap:r.copyMap,copyRegExp:r.copyRegExp,exceptions:r.exceptions,exceptRegExp:r.exceptRegExp,filterRegExp:r.filterRegExp},x=s.ownProperty,g=s.processSymbol,m=r.change,h=r.copy,A=r.except,b=r.filter;for(h&&(h=d(h),s.copyMap=h.map,s.copyRegExp=h.regexp),A&&(A=d(A,!0),s.exceptions=A.map,s.exceptRegExp=A.regexp),b&&(s["object"==typeof b?"filterRegExp":"filter"]=b),m&&(s["function"==typeof m?"changeFunc":"change"]=m),c=0,a=o.length;c<a;c++)if(i=o[c]){for(y in i)w(e,i,y,s);if(g){A={};do{for(p=0,u=(h=f(i)).length;p<u;p++)(y=h[p])in A||(w(e,i,y,s),A[y]=!0);i=x?null:l(i)}while(i)}}}return e}return Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),E.assign=function(e){return E(e,Array.prototype.slice.call(arguments,1),{overwrite:!0,ownProperty:!0})},E.change=function(e,o){return E(e,e,{change:o,overwrite:!0,oneSource:!0})},E.copy=function(e,o){return E({},e,o)},E.mixToItems=function(e,o,r){for(var t=0,n=e.length;t<n;t++)e[t]=E(e[t],o,r);return e},E.clone=function(e){return E({},this,e)},E.filter=function(e){return E({},this,"function"==typeof e?{filter:e}:e)},E.map=function(e){return E({},this,"function"==typeof e?{change:e}:e)},E.mix=function(e,o){return E(this,e,o)},E.update=function(e){return E.change(this,e)},E.getSettings=function(){return v},E.setSettings=function(e){v="object"==typeof e?e:null},r.exports=E});