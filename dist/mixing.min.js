!function(e,o){var r;void 0===e&&void 0!==window&&(e=window),"object"==typeof module&&module.exports?module.exports=o(require,exports,module):"function"==typeof define&&define.amd?define(["require","exports","module"],o):(r={exports:e},e.mixing=o(0,0,r))}(this,function(e,o,r){var v;function w(e,o){var r,t,n,i;if(Array.isArray(e)){if(0<e.length)for(r={},t=e.length;r[e[--t]]=o||null,t;);}else"string"==(i=typeof e)||"symbol"==i?(r={})[e]=o||null:"object"==i&&(e instanceof RegExp?n=e:r=e);return{map:r,regexp:n}}function E(e,o,r,t){var n,i,c,p,u,a=o[r],y=r.toString();function f(){return{field:r,value:a,targetValue:e[r],target:e,source:o}}t.ownProperty&&!o.hasOwnProperty(r)||t.copyMap&&!(r in t.copyMap)||t.copyRegExp&&!t.copyRegExp.test(y)||t.exceptions&&t.exceptions[r]||t.exceptRegExp&&t.exceptRegExp.test(y)||t.filter&&!t.filter.call(null,f())||t.filterRegExp&&!t.filterRegExp.test("symbol"==typeof a?a.toString():a)||((c=t.otherNameMap)&&r in c&&(r=c[r]),p=typeof a,!(t.recursive&&a&&"object"==p&&(u=e[r])&&"object"==typeof u)||Array.isArray(a)&&!t.mixFromArray||Array.isArray(u)&&!t.mixToArray?(n="function"==p)&&!t.copyFunc||r in e&&(!(u=t.overwrite)||"function"==typeof u&&!u(f())||u instanceof RegExp&&!u.test(r))||(t.changeFunc?a=t.changeFunc.call(null,f()):(i=t.change)&&r in i&&(a=i[r]),n&&t.funcToProto?e.constructor.prototype[r]=a:e[r]=a):R(u,a,t.mixFromArray?R({oneSource:!0},t):t))}function R(e,o,r){var t,n=typeof e,i=typeof o;if(e&&("object"==n||"function"==n)&&o&&("object"==i||"function"==i)){"object"!=typeof r||null===r?r=v||{}:v&&(t=v,v=null,r=R({},[r,t]),v=t),Array.isArray(o)&&!r.oneSource||(o=[o]);var c,p,u,a,y,f=Object.getOwnPropertySymbols,l=Object.getPrototypeOf,s={copyFunc:!("copyFunc"in r)||r.copyFunc,funcToProto:Boolean(r.funcToProto),processSymbol:(!("processSymbol"in r)||r.processSymbol)&&"function"==typeof f,mixFromArray:Boolean("mixFromArray"in r?r.mixFromArray:r.mixArray),mixToArray:Boolean("mixToArray"in r?r.mixToArray:r.mixArray),overwrite:r.overwrite,ownProperty:Boolean(r.ownProperty),recursive:Boolean(r.recursive),otherNameMap:"otherName"in r?r.otherName:null,changeFunc:r.changeFunc,copyMap:r.copyMap,copyRegExp:r.copyRegExp,exceptions:r.exceptions,exceptRegExp:r.exceptRegExp,filterRegExp:r.filterRegExp},x=s.ownProperty,g=s.processSymbol,m=r.change,h=r.copy,A=r.except,b=r.filter;for(h&&(h=w(h),s.copyMap=h.map,s.copyRegExp=h.regexp),A&&(A=w(A,!0),s.exceptions=A.map,s.exceptRegExp=A.regexp),b&&(s["object"==typeof b?"filterRegExp":"filter"]=b),m&&(s["function"==typeof m?"changeFunc":"change"]=m),c=0,u=o.length;c<u;c++)if(t=o[c]){for(y in t)E(e,t,y,s);if(g){A={};do{for(p=0,a=(h=f(t)).length;p<a;p++)(y=h[p])in A||(E(e,t,y,s),A[y]=!0);t=x?null:l(t)}while(t)}}}return e}return Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),R.assign=function(e){return R(e,Array.prototype.slice.call(arguments,1),{overwrite:!0,ownProperty:!0})},R.change=function(e,o){return R(e,e,{change:o,overwrite:!0,oneSource:!0})},R.copy=function(e,o){return R({},e,o)},R.mixToItems=function(e,o,r){for(var t=0,n=e.length;t<n;t++)e[t]=R(e[t],o,r);return e},R.clone=function(e){return R({},this,e)},R.filter=function(e){return R({},this,"function"==typeof e?{filter:e}:e)},R.map=function(e){return R({},this,"function"==typeof e?{change:e}:e)},R.mix=function(e,o){return R(this,e,o)},R.update=function(e){return R.change(this,e)},R.getSettings=function(){return v},R.setSettings=function(e){v="object"==typeof e?e:null},r.exports=R});