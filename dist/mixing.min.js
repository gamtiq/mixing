!function(a,b){if("object"==typeof exports)module.exports=b(require,exports,module);else if("function"==typeof define&&define.amd)define(["require","exports","module"],b);else{var c=function(b){return a[b]},d=a,e={exports:d};a.mixing=b(c,d,e)}}(this,function(a,b,c){function d(a,b){var c,d,e,f;if(Array.isArray(a)){if(a.length>0){c={},d=a.length;do c[a[--d]]=b||null;while(d)}}else f=typeof a,"string"===f||"symbol"===f?(c={},c[a]=b||null):"object"===f&&(a instanceof RegExp?e=a:c=a);return{map:c,regexp:e}}function e(a,b,c,d){var e,g,h,i,j,k=b[c],l=c.toString();d.ownProperty&&!b.hasOwnProperty(c)||d.copyMap&&!(c in d.copyMap)||d.copyRegExp&&!d.copyRegExp.test(l)||d.exceptions&&d.exceptions[c]||d.exceptRegExp&&d.exceptRegExp.test(l)||d.filter&&!d.filter.call(null,{field:c,value:k,target:a,source:b})||d.filterRegExp&&!d.filterRegExp.test("symbol"==typeof k?k.toString():k)||(h=d.otherNameMap,h&&c in h&&(c=h[c]),i=typeof k,!(d.recursive&&k&&"object"===i&&(j=a[c])&&"object"==typeof j)||Array.isArray(k)&&!d.mixFromArray||Array.isArray(j)&&!d.mixToArray?(e="function"===i,!d.overwrite&&c in a||e&&!d.copyFunc||(d.changeFunc?k=d.changeFunc.call(null,{field:c,value:k,target:a,source:b}):(g=d.change)&&c in g&&(k=g[c]),e&&d.funcToProto?a.constructor.prototype[c]=k:a[c]=k)):f(j,k,d.mixFromArray?f({oneSource:!0},d):d))}function f(a,b,c){var f=typeof a,g=typeof b;if(a&&("object"===f||"function"===f)&&b&&("object"===g||"function"===g)){("object"!=typeof c||null===c)&&(c={}),(!Array.isArray(b)||c.oneSource)&&(b=[b]);var h,i,j,k,l,m,n=Object.getOwnPropertySymbols,o=Object.getPrototypeOf,p={copyFunc:"copyFunc"in c?c.copyFunc:!0,funcToProto:Boolean(c.funcToProto),processSymbol:("processSymbol"in c?c.processSymbol:!0)&&"function"==typeof n,mixFromArray:Boolean(c.mixFromArray),mixToArray:Boolean(c.mixToArray),overwrite:Boolean(c.overwrite),ownProperty:Boolean(c.ownProperty),recursive:Boolean(c.recursive),otherNameMap:"otherName"in c?c.otherName:null},q=p.ownProperty,r=p.processSymbol,s=c.change,t=c.copy,u=c.except,v=c.filter;for(t&&(t=d(t),p.copyMap=t.map,p.copyRegExp=t.regexp),u&&(u=d(u,!0),p.exceptions=u.map,p.exceptRegExp=u.regexp),v&&(p["object"==typeof v?"filterRegExp":"filter"]=v),s&&(p["function"==typeof s?"changeFunc":"change"]=s),h=0,j=b.length;j>h;h++)if(l=b[h]){for(m in l)e(a,l,m,p);if(r){u={};do{for(t=n(l),i=0,k=t.length;k>i;i++)m=t[i],m in u||(e(a,l,m,p),u[m]=!0);l=q?null:o(l)}while(l)}}}return a}return Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),f.change=function(a,b){return f(a,a,{change:b,overwrite:!0,oneSource:!0})},f.copy=function(a,b){return f({},a,b)},f.mixToItems=function(a,b,c){for(var d=0,e=a.length;e>d;d++)a[d]=f(a[d],b,c);return a},f.clone=function(a){return f({},this,a)},f.filter=function(a){return f({},this,"function"==typeof a?{filter:a}:a)},f.map=function(a){return f({},this,"function"==typeof a?{change:a}:a)},f.mix=function(a,b){return f(this,a,b)},f.update=function(a){return f.change(this,a)},c.exports=f,f});